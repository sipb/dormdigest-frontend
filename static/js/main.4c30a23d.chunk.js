(this.webpackJsonpdormspam=this.webpackJsonpdormspam||[]).push([[0],{40:function(e,t,a){e.exports=a(98)},47:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),i=a.n(s),c=(a(99),a(47),a(34)),l=a(3),o=a(4),u=a(6),h=a(5),d=a(7),m=a(35),v=a(107),g=a(108),p=a(109);function f(){return null!==("undefined"===typeof sessionStorage.user?null:JSON.parse(sessionStorage.user))}function y(e){sessionStorage.setItem("user",JSON.stringify(e))}var b=a(2),E=a(8),k=a.n(E),O=a(19),C=a.n(O),j=(a(75),a(20)),S={OTHER:"#888888",FOOD:"#EE6F6F",CAREER:"#459AF6",FUNDRAISING:"#A16EE5",APPLICATION:"#459AF6",PERFORMANCE:"#12DAA4",BOBA:"#F6B957",TALKS:"#73F23A",SOCIAL:"#25C8D3"},N=Object.keys(S),D=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"getCategoriesColorMapping",value:function(){return S}},{key:"getCategoriesList",value:function(){return N}},{key:"getCategoriesEmptyFrequency",value:function(){var e={},t=!0,a=!1,n=void 0;try{for(var r,s=N[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){e[r.value]=0}}catch(i){a=!0,n=i}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}return e}},{key:"parseCategoryNameFrequency",value:function(e){for(var t=this.getCategoriesEmptyFrequency(),a=0,n=Object.entries(e);a<n.length;a++){var r=n[a],s=Object(j.a)(r,2),i=s[0],c=s[1];t[i]=c}return t}}]),e}(),w=a(16),M="https://dormdigest.xvm.mit.edu:8432",A=function(){function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l.a)(this,e);var r={method:"POST",url:M+t,withCredentials:!0};r.data=n.data,void 0!==n.method&&(r.method=n.method),r.params=n.params,r.body=n.body,C()(r).then((function(e){"undefined"!==typeof a.then&&a.then(e)})).catch((function(e){"undefined"!==typeof a.catch&&a.catch(e)}))}return Object(o.a)(e,[{key:"catch",value:function(e){return this.catch=e,this}},{key:"then",value:function(e){return this.then=e,this}}]),e}(),x=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"getEventFrequencyByDateForMonth",value:function(e,t){return this.getCategoryFrequencyByMonth(e,t).then((function(e){for(var t=e.frequency,a={},n=0,r=Object.entries(t);n<r.length;n++){var s=r[n],i=Object(j.a)(s,2),c=i[0],l=i[1];a[c]=D.parseCategoryNameFrequency(l)}return a}))}},{key:"getEventsByQuery",value:function(e){return new A("https://dormdigest.xvm.mit.edu:8432/events?q="+e)}},{key:"getEventById",value:function(e){return new A("https://dormdigest.xvm.mit.edu:8432/events/"+e)}},{key:"getAllEvents",value:function(){return new A("https://dormdigest.xvm.mit.edu:8432/events/all")}},{key:"getCategoryFrequencyByMonth",value:function(e,t){return fetch("https://dormdigest.xvm.mit.edu:8432/get_event_category_frequency_for_month",{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({month:e,year:t})}).then((function(e){if(e.ok)return e.json();throw console.error("Error:",e.status,e.statusText),new Error("Error fetching data")})).catch((function(e){throw console.error("Error:",e),e}))}},{key:"getEventsByDate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return fetch("https://dormdigest.xvm.mit.edu:8432/get_events_by_date",{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({from_date:e,include_description:t})}).then((function(e){if(e.ok)return e.json();throw console.error("Error:",e.status,e.statusText),new Error("Error fetching data")})).catch((function(e){throw console.error("Error:",e),e}))}}]),e}(),L=(a(76),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).getDayTags=a.getDayTags.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getDayTags",value:function(){var e=this.props.frequencies,t={};for(var a in e)this.props.categories.indexOf(a)>-1&&(t[a]=e[a]);var n=Object.keys(t).sort((function(t,a){return e[a]-e[t]})),s=[];if(this.props.focus)for(var i=0;i<3;i++)n.length>i&&e[n[i]]>0&&s.push(r.a.createElement("span",{className:"tags",style:{color:this.props.colors[n[i]]},key:"tag-"+n[i]},"\u25a0"));return s}},{key:"render",value:function(){var e=this.getDayTags();return r.a.createElement("div",{className:"HomeSidebarCalendarDayItem"+(this.props.active?" active":"")+(this.props.focus?" focus":"")+(this.props.isToday?" today":"")+(this.props.hasEvent?" hasEvent":""),moment:this.props.moment,onClick:this.props.onClick},r.a.createElement("div",{className:"circle"},r.a.createElement("p",{className:"day"},this.props.day,r.a.createElement("br",null),e)))}}]),t}(n.Component)),I=(a(77),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={today:k()(),m:k()(),frequencies:{},colors:Object(w.a)({},D.getCategoriesColorMapping())},a.previousMonth=a.previousMonth.bind(Object(b.a)(a)),a.nextMonth=a.nextMonth.bind(Object(b.a)(a)),a.selectDay=a.selectDay.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({today:k()(e.selectedDay),m:k()(e.selectedDay)});var a=k()(this.state.m).month()+1,n=k()(this.state.m).year();x.getEventFrequencyByDateForMonth(a,n).then((function(e){t.setState({frequencies:e})}))}},{key:"previousMonth",value:function(){var e=this;this.setState({m:this.state.m.subtract(1,"months")});var t=k()(this.state.m).month()+1,a=k()(this.state.m).year();x.getEventFrequencyByDateForMonth(t,a).then((function(t){e.setState({frequencies:t})}))}},{key:"nextMonth",value:function(){var e=this;this.setState({m:this.state.m.add(1,"months")});var t=k()(this.state.m).month()+1,a=k()(this.state.m).year();x.getEventFrequencyByDateForMonth(t,a).then((function(t){e.setState({frequencies:t})}))}},{key:"selectDay",value:function(e){for(var t=e.target;null===t.getAttribute("moment");)t=t.parentElement;var a=t.getAttribute("moment");this.setState({today:k()(a),m:k()(a)}),this.props.onSelectDay(k()(a))}},{key:"render",value:function(){var e=this,t=[],a=k()(this.state.m).startOf("month"),n=k()(a);n=n.endOf("month");for(var s=a.startOf("week"),i=n.endOf("week"),c=s;c.isBefore(i);c.add(1,"days"))t.push({moment:c.format(),date:c.date(),active:c.isSame(this.state.today,"day"),focus:c.isSame(this.state.m,"month"),isToday:c.format("MMM Do YY")===k()().format("MMM Do YY"),hasEvent:c.format("YYYY-MM-DD")in this.state.frequencies,frequencies:c.format("YYYY-MM-DD")in this.state.frequencies?this.state.frequencies[c.format("YYYY-MM-DD")]:D.getCategoriesEmptyFrequency()});var l=t.map((function(t,a){return r.a.createElement(L,{key:a,moment:t.moment,day:t.date,active:t.active,focus:t.focus,isToday:t.isToday,hasEvent:t.hasEvent,onClick:e.selectDay,frequencies:t.frequencies,colors:e.state.colors,categories:e.props.categories})}));return r.a.createElement("div",{className:"HomeSidebarCalendar"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"left-button",onClick:this.previousMonth}),r.a.createElement("h2",null,this.state.m.format("MMMM YYYY")),r.a.createElement("div",{className:"right-button",onClick:this.nextMonth})),r.a.createElement("div",{className:"calendar"},l))}}]),t}(n.Component)),U=a(37),F=a(24),T=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"saveCategoryFilters",value:function(e){localStorage.setItem("filters",JSON.stringify(e))}},{key:"getCategoryFilters",value:function(){if(!localStorage.getItem("filters")){var e=Object(F.a)(D.getCategoriesList());return this.saveCategoryFilters(e),e}}}]),e}(),B=(a(78),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={categories:[],filters:e.user.settings.filters};var n=Object(F.a)(D.getCategoriesList());return a.setState({categories:Object(w.a)({},D.getCategoriesColorMapping()),filters:n}),a.props.onCategoryUpdate(n),a.handleCategoryClick=a.handleCategoryClick.bind(Object(b.a)(a)),a.handleCheck=a.handleCheck.bind(Object(b.a)(a)),a.toggleCategory=a.toggleCategory.bind(Object(b.a)(a)),a.handleSave=a.handleSave.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleCategoryClick",value:function(e){if("input"!==e.target.tagName.toLowerCase()){var t=null;e.target.classList.contains("category")?t=e.target:e.target.parentElement.parentElement.classList.contains("category")&&(t=e.target.parentElement.parentElement);var a=this.state.categories[t.getAttribute("index")].name;this.toggleCategory(a)}}},{key:"handleCheck",value:function(e){var t=this.state.categories[e.target.parentElement.getAttribute("index")].name;this.toggleCategory(t)}},{key:"toggleCategory",value:function(e){var t=this.state.filters;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({filters:t}),this.props.onCategoryUpdate(t),this.handleSave()}},{key:"handleSave",value:function(){T.saveCategoryFilters(this.state.filters),this.props.onUserUpdate()}},{key:"render",value:function(){for(var e=[],t=0,a=0,n=Object.entries(this.state.categories);a<n.length;a++){var s=n[a],i=Object(j.a)(s,2),c=i[0],l=i[1];e.append(r.a.createElement("div",{className:"category",key:t,index:t,onClick:this.handleCategoryClick,style:this.state.filters.includes(c)?{color:l,borderLeft:"3px solid "+l}:{color:"#CFCFCF",borderLeft:"3px solid #CFCFCF"}},r.a.createElement("input",{type:"checkbox",checked:this.state.filters.includes(c),onChange:this.handleCheck}),r.a.createElement("div",{className:"text"},r.a.createElement("h3",null,c)))),Object(U.a)("index"),t++}return r.a.createElement("div",{className:"HomeSidebarCategoriesView"},e)}}]),t}(n.Component)),Y=a(101),q=(a(79),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"HomeHeaderView"},r.a.createElement("img",{src:"/img/bars-solid.svg",alt:"Menu",className:"hamburger",onClick:this.props.onHamburgerClick}),r.a.createElement("img",{className:"logo",src:"/img/dormspam.svg",alt:"Logo"}),r.a.createElement(Y.a,{to:"/settings"}))}}]),t}(n.Component)),_=(a(80),a(81),a(82),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"HomeSelectionWeekBarDayItem"+(this.props.data.isToday?" today":"")+(this.props.data.active?" active":""),index:this.props.data.index,onClick:this.props.onClick},r.a.createElement("p",{className:"weekday"},this.props.data.day),r.a.createElement("div",{className:"circle"},r.a.createElement("p",{className:"day"},this.props.data.date)))}}]),t}(n.Component)),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentWeekStart:k()().startOf("week"),currentDate:k()()},a.previousWeek=a.previousWeek.bind(Object(b.a)(a)),a.nextWeek=a.nextWeek.bind(Object(b.a)(a)),a.selectDay=a.selectDay.bind(Object(b.a)(a)),a.selectToday=a.selectToday.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({currentDate:k()(e.selectedDay),currentWeekStart:k()(e.selectedDay).startOf("week")})}},{key:"previousWeek",value:function(){this.setState({currentWeekStart:k()(this.state.currentWeekStart).subtract(1,"weeks")})}},{key:"nextWeek",value:function(){this.setState({currentWeekStart:k()(this.state.currentWeekStart).add(1,"weeks")})}},{key:"selectDay",value:function(e){var t=e.target;null===t.getAttribute("index")&&(t=t.parentElement),null===t.getAttribute("index")&&(t=t.parentElement);var a=t.getAttribute("index"),n=k()(this.state.currentWeekStart);n=n.add(a,"days"),this.setState({currentDate:n}),this.props.onSelectDay(k()(n))}},{key:"selectToday",value:function(){var e=k()();this.setState({currentDate:k()(e)}),this.props.onSelectDay(k()(e))}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<7;a++)t.push({index:a,day:k()(this.state.currentWeekStart).add(a,"days").format("ddd").toUpperCase(),date:k()(this.state.currentWeekStart).add(a,"days").date(),active:k()(this.state.currentWeekStart).add(a,"days").format("MMM Do YY")===k()(this.state.currentDate).format("MMM Do YY"),isToday:k()(this.state.currentWeekStart).add(a,"days").format("MMM Do YY")===k()().format("MMM Do YY")});var n=t.map((function(t){return r.a.createElement(_,{onClick:e.selectDay,key:t.date,data:t,categories:e.props.categories})}));return r.a.createElement("div",{className:"HomeSelectionWeekBar"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,r.a.createElement("span",{className:"bold"},this.state.currentDate.format("dddd")),", ",this.state.currentDate.format("MMMM Do")),r.a.createElement("h1",{className:"outline",onClick:this.selectToday},"Today")),r.a.createElement("div",{className:"weekbar"},r.a.createElement("div",{className:"left-button",onClick:this.previousWeek}),r.a.createElement("div",{className:"weekdays"},n),r.a.createElement("div",{className:"right-button",onClick:this.nextWeek})))}}]),t}(n.Component),H=(a(83),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={openContent:"Close",closedContent:"Select Categories",isOpen:!1},a.handleCategorySelect=a.handleCategorySelect.bind(Object(b.a)(a)),a.switchFilter=a.switchFilter.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleCategorySelect",value:function(e){if("input"!==e.target.tagName.toLowerCase()){var t=e.target.childNodes[0];t.checked=!t.checked}}},{key:"switchFilter",value:function(e){this.setState({isOpen:!this.state.isOpen})}},{key:"handleChange",value:function(e){this.props.onSearch(e.target.value)}},{key:"render",value:function(){return r.a.createElement("div",{className:"HomeSelectionFilter"},r.a.createElement("div",{className:"icon"},r.a.createElement("img",{src:"/img/search.svg",alt:"Search"})),r.a.createElement("input",{className:"search",type:"text",name:"search",placeholder:"Search by content...",onChange:this.handleChange}),r.a.createElement("br",null))}}]),t}(n.Component)),R=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"HomeSelectionView"},r.a.createElement(P,{selectedDay:this.props.selectedDay,onSelectDay:this.props.onSelectDay}),r.a.createElement(H,{onSearch:this.props.onSearch}))}}]),t}(n.Component),W=(a(84),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={colors:Object(w.a)({},D.getCategoriesColorMapping())},a.getCategories=a.getCategories.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getCategories",value:function(){for(var e=this.props.event.tags,t=[],a=0;a<e.length;a++)t.push(r.a.createElement("span",{className:"tags",key:"tags-"+e[a],style:{border:"2px solid "+this.state.colors[e[a]],color:this.state.colors[e[a]]}},"\u25cf ",e[a]));return t}},{key:"render",value:function(){if(null===this.props.event)return r.a.createElement("div",null);var e=this.getCategories(),t=this.props.event.user_email+" on "+k()(new Date(this.props.event.date_created).toString()).format("MM/DD/YYYY h:mm a");return r.a.createElement("div",{className:"HomeSidebarEventModal"},r.a.createElement("div",{className:"metadata"},r.a.createElement("img",{className:"back",src:"/img/grey-back.svg",alt:"Back",onClick:this.props.onSelectBack}),r.a.createElement("h3",null,t),r.a.createElement("div",{className:"minipadding"}),r.a.createElement("h3",null,e),r.a.createElement("div",{className:"padding"}),r.a.createElement("h2",null,this.props.event.title),r.a.createElement("hr",null)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.event.description_html}}))}}]),t}(n.Component)),K=(a(85),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(b.a)(a)),a.colors=D.getCategoriesColorMapping(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleClick",value:function(){this.props.onClick(this.props.event)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.event.tags.length;t++)e.push(r.a.createElement("span",{className:"dots",style:{color:this.colors[this.props.event.tags[t]]},key:"dots-"+this.props.event.tags[t]},"\u25a0"));return r.a.createElement("div",{className:"HomeFeedEventView"+(this.props.selected?" selected":""),style:this.props.selected?{background:this.props.color}:{},onClick:this.handleClick},r.a.createElement("h3",{className:"bold"},this.props.event.title),r.a.createElement("p",null,this.props.event.location," ",e),r.a.createElement("p",{className:"description"+(this.props.selected?" selected":"")},r.a.createElement("br",null),this.props.event.description))}}]),t}(n.Component)),V=(a(86),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={data:[],searchCount:0,searching:!1,colors:D.getCategoriesColorMapping()},a.saveEventData=a.saveEventData.bind(Object(b.a)(a)),a.parseCategories=a.parseCategories.bind(Object(b.a)(a));var n=Object(b.a)(a);return x.getEventsByDate(k()().format("YYYY-MM-DD")).then((function(e){n.saveEventData(e)})),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.search.length>0,n=this.state.searchCount+1;a||x.getEventsByDate(e.selectedDay.format("YYYY-MM-DD")).then((function(e){n<t.state.searchCount||t.saveEventData(e)})),this.setState({searchCount:n,searching:a})}},{key:"saveEventData",value:function(e){e.events.forEach((function(t,a){e.tags[a]&&(t.tags=e.tags[a],t.user_email=e.users[a])}));for(var t=[],a=e.events.sort((function(e,t){var a=k()(e.start_time).valueOf(),n=k()(t.start_time).valueOf();return a>n?1:a<n?-1:0})),n=0;n<a.length;n++)0===t.length?t.push([a[n]]):k()(t[t.length-1][0].start_time).valueOf()===k()(a[n].start_time).valueOf()?t[t.length-1].push(a[n]):t.push([a[n]]);for(var r=0;r<a.length;r++)a[r].tags=this.parseCategories(a[r].tags);this.setState({data:t})}},{key:"parseCategories",value:function(e){var t=D.getCategoriesList();return e.map((function(e){return t[e]}))}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.data.length;t++){e.push(r.a.createElement("div",{className:"timeline",key:"times"+t+"1"},r.a.createElement("div",{className:"sideline"},r.a.createElement("div",{className:"ball"}))));var a=k()("".concat(this.state.data[t][0].start_date,"T").concat(this.state.data[t][0].start_time));a=a.format("h:mm a"),e.push(r.a.createElement("div",{className:"onetime",key:"times"+t+"2"},a));for(var n=0;n<this.state.data[t].length;n++){var s=!1;null!==this.props.selectedEvent&&(s=this.props.selectedEvent.uid===this.state.data[t][n].uid),e.push(r.a.createElement("div",{className:"timeevents",key:this.state.data[t][n].uid},r.a.createElement("div",{className:"sidespace"}),r.a.createElement(K,{event:this.state.data[t][n],selected:s,onClick:this.props.onSelectEvent,colors:this.state.colors})))}}return 0===e.length&&(e=r.a.createElement("div",{className:"empty-events"},r.a.createElement("img",{className:"empty-events-icon",src:"img/empty.png"}),r.a.createElement("h1",{className:"empty-events-label"},"No events found!"))),r.a.createElement("div",{className:"HomeFeedView"},e)}}]),t}(n.Component)),J=(a(87),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={colors:Object(w.a)({},D.getCategoriesColorMapping())},a.getCategories=a.getCategories.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getCategories",value:function(){for(var e=this.props.event.tags,t=[],a=0;a<e.length;a++)t.push(r.a.createElement("span",{className:"tags",key:"tags-"+e[a],style:{border:"2px solid "+this.state.colors[e[a]],color:this.state.colors[e[a]]}},"\u25cf ",e[a]));return t}},{key:"render",value:function(){if(null===this.props.event)return null;var e=this.getCategories();return r.a.createElement("div",{id:this.props.event.id,className:"HomeFeedEventModal"},r.a.createElement("img",{className:"back",src:"/img/x-button.svg",alt:"Back",onClick:this.props.onSelectBack}),r.a.createElement("h3",null,this.props.event.user_email),r.a.createElement("div",{className:"minipadding"}),r.a.createElement("h3",null,e),r.a.createElement("div",{className:"padding"}),r.a.createElement("hr",null),r.a.createElement("h2",null,this.props.event.title),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.event.description_html}}))}}]),t}(n.Component)),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={day:k()(),event:null,search:"",user:{settings:{filters:[]}},categories:D.getCategoriesList(),mobileMenu:!1},a.handleSelectEvent=a.handleSelectEvent.bind(Object(b.a)(a)),a.handleSelectDay=a.handleSelectDay.bind(Object(b.a)(a)),a.handleClickAway=a.handleClickAway.bind(Object(b.a)(a)),a.handleSearch=a.handleSearch.bind(Object(b.a)(a)),a.handleUserUpdate=a.handleUserUpdate.bind(Object(b.a)(a)),a.handleCategoryUpdate=a.handleCategoryUpdate.bind(Object(b.a)(a)),a.toggleMobileMenu=a.toggleMobileMenu.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleSelectEvent",value:function(e){null!==this.state.event&&this.state.event.id===e.id?(document.getElementsByClassName("column left")[0].removeEventListener("click",this.handleClickAway,!1),this.setState({event:null})):(document.getElementsByClassName("column left")[0].addEventListener("click",this.handleClickAway,!1),this.setState({event:e}))}},{key:"handleSelectDay",value:function(e){this.setState({day:e,event:null})}},{key:"handleClickAway",value:function(e){document.getElementsByClassName("column left")[0].removeEventListener("click",this.handleClickAway,!1),this.setState({event:null})}},{key:"handleSearch",value:function(e){this.setState({search:e})}},{key:"handleUserUpdate",value:function(e){this.setState({user:e})}},{key:"handleCategoryUpdate",value:function(e){this.setState({categories:e})}},{key:"toggleMobileMenu",value:function(){this.setState({mobileMenu:!this.state.mobileMenu})}},{key:"render",value:function(){return r.a.createElement("div",{className:"HomeView"},r.a.createElement("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScdLEjdkiVAdQ2gKoA1QtD9ANvBuOrce4ZIJwbIVQz7TRkObg/viewform",target:"_blank"},r.a.createElement("div",{className:"betaform"}," beta - report bugs / suggest changes ",r.a.createElement("a",{style:{textDecoration:"underline"}},"here"))),r.a.createElement("div",{className:"column left"+(null!==this.state.event?" inactive":"")},r.a.createElement("div",{className:"betaspace"}),r.a.createElement("div",{className:"greybox"+(this.state.mobileMenu?" active":""),onClick:this.toggleMobileMenu}),r.a.createElement(q,{onHamburgerClick:this.toggleMobileMenu}),r.a.createElement(R,{onSearch:this.handleSearch,selectedDay:this.state.day,onSelectDay:this.handleSelectDay,categories:this.state.categories}),r.a.createElement(V,{search:this.state.search,selectedDay:this.state.day,selectedEvent:this.state.event,onSelectEvent:this.handleSelectEvent,categories:this.state.categories})),r.a.createElement("div",{className:"modal"},r.a.createElement(J,{event:this.state.event,onSelectBack:this.handleClickAway})),r.a.createElement("div",{className:"column right"+(this.state.mobileMenu?" mobile":"")+(null!==this.state.event?" active":"")},r.a.createElement("div",{className:"betaspace"}),r.a.createElement(I,{selectedDay:this.state.day,onSelectDay:this.handleSelectDay,categories:this.state.categories}),r.a.createElement(B,{onUserUpdate:this.handleUserUpdate,user:this.state.user,onCategoryUpdate:this.handleCategoryUpdate}),r.a.createElement(W,{onSelectBack:this.handleClickAway,event:this.state.event})))}}]),t}(n.Component),G=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={event:null};var n=Object(b.a)(a);return x.getEventById(e.match.params.id).then((function(e){n.setState({event:e.data})})),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return null===this.state.event?r.a.createElement("div",null):r.a.createElement(W,{event:this.state.event})}}]),t}(n.Component),z=a(106),Z=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"getCurrentUser",value:function(){return new A("/users/current")}},{key:"login",value:function(e){return new A("/users/login",{data:{kerberos:e},method:"post"})}},{key:"logout",value:function(){return sessionStorage.clear(),new A("/users/current",{method:"delete"})}},{key:"updateCurrentUser",value:function(e){return new A("/users/current",{data:e,method:"put"})}},{key:"verify",value:function(e,t){return new A("/users/verify",{data:{code:e,kerberos:t},method:"post"})}}]),e}(),$=(a(88),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={redirect:null,pending:!1},a.kerberosInput=r.a.createRef(),a.handleKeyDown=a.handleKeyDown.bind(Object(b.a)(a)),a.handleLogin=a.handleLogin.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleKeyDown",value:function(e){13===e.keyCode&&this.handleLogin()}},{key:"handleLogin",value:function(){if(0!==this.kerberosInput.current.value.length&&!this.state.pending){var e=this.kerberosInput.current.value,t=this;Z.login(e).then((function(a){t.setState({redirect:"/verify?k="+e})})),document.getElementById("login-btn").style.backgroundColor="#888BDE",document.getElementById("login-btn").innerHTML="Sending email to "+e+"@mit.edu",document.getElementById("login-btn").style.cursor="text",this.setState({pending:!0}),y("lol"),this.setState({redirect:"/"})}}},{key:"render",value:function(){return null!==this.state.redirect?r.a.createElement(z.a,{to:this.state.redirect}):r.a.createElement("div",{className:"LoginView"},r.a.createElement("div",{className:"bigger-container"},r.a.createElement("img",{className:"logo",src:"/img/dormspam-white.svg",alt:"Logo"}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Sign In"),r.a.createElement("input",{ref:this.kerberosInput,onKeyDown:this.handleKeyDown,type:"text",placeholder:"Enter your kerberos"}),r.a.createElement("button",{id:"login-btn",onClick:this.handleLogin},"Login"))))}}]),t}(n.Component)),X=(a(90),a(91),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={frequency:a.props.user.settings.frequency},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSave=a.handleSave.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({frequency:parseInt(e.target.value,10)})}},{key:"handleSave",value:function(){var e=this;Z.updateCurrentUser({frequency:parseInt(this.state.frequency,10)}).then((function(t){e.props.onUserUpdate(t.data)}))}},{key:"render",value:function(){var e=[0,1,2,3,5,7].map((function(e){return r.a.createElement("option",{key:e},e)}));return r.a.createElement("div",{className:"FrequencyView"+(this.props.hidden?" hidden":"")},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"How often would you like your digest?"),r.a.createElement("div",{className:"line"},r.a.createElement("p",null,"Once every"),r.a.createElement("label",{className:"custom-select"},r.a.createElement("select",{defaultValue:this.state.frequency,onChange:this.handleChange},e)),r.a.createElement("p",null,1===this.state.frequency?"day":"days"),r.a.createElement("button",{className:"btn-freq",onClick:this.handleSave},"Save"))))}}]),t}(n.Component)),ee=(a(92),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={categories:[],preferences:e.user.settings.preferences,colors:{}},a.saveCategories=a.saveCategories.bind(Object(b.a)(a)),a.handleCategoryClick=a.handleCategoryClick.bind(Object(b.a)(a)),a.handleCheck=a.handleCheck.bind(Object(b.a)(a)),a.handleSave=a.handleSave.bind(Object(b.a)(a));var n=Object(b.a)(a);return C.a.get("https://dormdigest.xvm.mit.edu:8432/categories").then((function(e){n.saveCategories(e.data)})),D.getCategoriesColorMapping().then((function(e){for(var t={},n=0;n<e.data.length;n++)t[e.data[n].name]=e.data[n].color;a.setState({colors:t})})),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"saveCategories",value:function(e){this.setState({categories:e})}},{key:"handleCategoryClick",value:function(e){if("input"!==e.target.tagName.toLowerCase()){var t=null;e.target.classList.contains("category")?t=e.target:e.target.parentElement.parentElement.classList.contains("category")&&(t=e.target.parentElement.parentElement);var a=this.state.categories[t.getAttribute("index")].id;this.toggleCategory(a)}}},{key:"handleCheck",value:function(e){var t=this.state.categories[e.target.parentElement.getAttribute("index")].id;this.toggleCategory(t)}},{key:"toggleCategory",value:function(e){var t=this.state.preferences;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({preferences:t})}},{key:"handleSave",value:function(){var e=this;Z.updateCurrentUser({preferences:this.state.preferences}).then((function(t){e.props.onUserUpdate(t.data)}))}},{key:"render",value:function(){var e=this,t=this.state.categories.map((function(t,a){return r.a.createElement("div",{className:"category",key:a,index:a,onClick:e.handleCategoryClick,style:{borderLeft:"3px solid "+e.state.colors[t.name]}},r.a.createElement("input",{type:"checkbox",checked:e.state.preferences.includes(t.id),onChange:e.handleCheck}),r.a.createElement("div",{className:"text"},r.a.createElement("h3",null,t.name),r.a.createElement("p",null,t.description)))}));return r.a.createElement("div",{className:"PreferencesView"+(this.props.hidden?" hidden":"")},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Select your digest preferences"),t,r.a.createElement("button",{className:"btn-pref",onClick:this.handleSave},"Save")))}}]),t}(n.Component)),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentItem:"Preferences",loading:!0,redirect:null},Z.getCurrentUser().then((function(e){a.setState({loading:!1,user:e.data})})),a.handleItemClick=a.handleItemClick.bind(Object(b.a)(a)),a.handleUserUpdate=a.handleUserUpdate.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleItemClick",value:function(e){var t=this;"Log Out"===e.target.getAttribute("item")&&Z.logout().then((function(e){t.setState({redirect:"/"})})),this.setState({currentItem:e.target.getAttribute("item")})}},{key:"handleUserUpdate",value:function(e){this.setState({user:e})}},{key:"render",value:function(){var e=this;if(null!==this.state.redirect)return r.a.createElement(z.a,{to:this.state.redirect});if(!0===this.state.loading)return r.a.createElement("div",null);var t=["Preferences","Frequency","Log Out"].map((function(t){return r.a.createElement("li",{className:t===e.state.currentItem?"active":"",key:t,item:t,onClick:e.handleItemClick},t)}));return r.a.createElement("div",{className:"SettingsView"},r.a.createElement("div",{className:"right column"},r.a.createElement(X,{hidden:"Frequency"!==this.state.currentItem,onUserUpdate:this.handleUserUpdate,user:this.state.user}),r.a.createElement(ee,{hidden:"Preferences"!==this.state.currentItem,onUserUpdate:this.handleUserUpdate,user:this.state.user})),r.a.createElement("div",{className:"left column"},r.a.createElement("div",{className:"headertop"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/img/back.svg",alt:"Settings"}),r.a.createElement("br",null),r.a.createElement("img",{className:"logo",src:"/img/dormspam.svg",alt:"Logo"}))),r.a.createElement("ul",null,t)))}}]),t}(n.Component),ae=(a(93),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={code:"",deleteOnUp:!1,keyPressed:0,redirect:null,showErrorText:!1},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(b.a)(a)),a.handleKeyUp=a.handleKeyUp.bind(Object(b.a)(a)),a.handleLogin=a.handleLogin.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"keyCodeIsNumber",value:function(e){return e>=48&&e<=57||e>=96&&e<=105}},{key:"handleChange",value:function(e){var t=document.getElementsByTagName("input");if(8===this.state.keyPressed){var a=this.state.code.substring(0,this.state.code.length-1);this.setState({code:a}),t[a.length].focus()}else if(this.keyCodeIsNumber(this.state.keyPressed)){if(4===this.state.code.length)return;var n=this.state.code+(this.state.keyPressed-48).toString();this.setState({code:n}),t[Math.min(n.length,3)].focus()}}},{key:"handleKeyDown",value:function(e){13!==e.keyCode?this.setState({deleteOnUp:8===e.keyCode&&0===e.target.value.length,keyPressed:e.keyCode}):this.handleLogin()}},{key:"handleKeyUp",value:function(e){this.state.deleteOnUp&&this.handleChange(e)}},{key:"handleLogin",value:function(){var e=window.location.href;if(e.includes("?")){for(var t=e.split("?")[1].split("&"),a={},n=0;n<t.length;n++){var r=t[n];r.includes("=")&&(a[r.split("=")[0]]=r.split("=")[1])}var s=a.k,i=this;Z.verify(this.state.code,s).then((function(e){y(e.data),i.setState({redirect:"/"})})).catch((function(e){i.setState({showErrorText:!0})}))}else this.setState({redirect:"/login"})}},{key:"render",value:function(){var e=this;if(null!==this.state.redirect)return r.a.createElement(z.a,{to:this.state.redirect});var t=[0,1,2,3].map((function(t){return r.a.createElement("input",{type:"number",key:t,index:t,placeholder:"0",value:e.state.code.charAt(t),onChange:e.handleChange,onKeyUp:e.handleKeyUp,onKeyDown:e.handleKeyDown,className:"number-input"})})),a=this.state.showErrorText?r.a.createElement("p",null,"Hmm... that code doesn't look right to us. Please try entering it again."):r.a.createElement("p",null,"Please check your MIT email address for a 4-digit verification code (this might take a minute)");return r.a.createElement("div",{className:"VerifyView"},r.a.createElement("div",{className:"bigger-container"},r.a.createElement("img",{className:"logo",src:"/img/dormspam-white.svg",alt:"Logo"}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Verify Email"),a,r.a.createElement("div",{className:"code-input"},t),r.a.createElement("button",{onClick:this.handleLogin},"Login"))))}}]),t}(n.Component)),ne=(a(100),a(94),a(38)),re=a.n(ne),se=(a(96),{resizable:!0,sortable:!0}),ie=[{name:"ID",key:"uid",width:120},{name:"Name",key:"name",formatter:function(e){var t=e.value,a=e.row;return r.a.createElement("a",{className:"events-link",href:"/event/".concat(a.uid)},t)}},{name:"Start Date",key:"start_time",width:220,formatter:function(e){var t=e.value;return r.a.createElement("a",null,new Date(t).toLocaleDateString()," @ ",new Date(t).toLocaleTimeString())}},{name:"Published",key:"published",formatter:function(e){var t=e.value;return r.a.createElement("a",null,t?"PUBLISHED":"")},width:100},{name:"Approved",key:"approved",formatter:function(e){var t=e.value;return r.a.createElement("a",null,t?"APPROVED":"")},width:100}].map((function(e){return Object(w.a)({},se,{},e)})),ce=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(u.a)(this,Object(h.a)(t).call(this,e)),console.log(e),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"EventsTable"},r.a.createElement(re.a,{columns:ie,rowGetter:function(t){return e.props.data[t]},rowsCount:this.props.data.length,minHeight:800}))}}]),t}(n.Component),le=(a(97),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={loading:!0,allEvents:null,currentItem:"Events"},a.handleItemClick=a.handleItemClick.bind(Object(b.a)(a)),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.getAllEvents().then((function(t){console.log(t.data),e.setState({loading:!1,allEvents:t.data})})).catch((function(e){console.log(e)}))}},{key:"handleItemClick",value:function(e){var t=this;"Log Out"===e.target.getAttribute("item")&&Z.logout().then((function(e){t.setState({redirect:"/"})})),this.setState({currentItem:e.target.getAttribute("item")})}},{key:"render",value:function(){var e=this,t=["Events","Log Out"].map((function(t){return r.a.createElement("li",{className:t===e.state.currentItem?"active":"",key:t,item:t,onClick:e.handleItemClick},t)}));return r.a.createElement("div",{className:"AdminView"},r.a.createElement("div",{className:"right column"},this.state.loading?r.a.createElement("a",null,"Loading Data"):r.a.createElement(ce,{data:this.state.allEvents})),r.a.createElement("div",{className:"left column"},r.a.createElement("div",{className:"headertop"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/img/back.svg",alt:"Admin Settings"}),r.a.createElement("br",null),r.a.createElement("img",{className:"logo",src:"/img/dormspam.svg",alt:"Logo"}))),r.a.createElement("ul",null,t)))}}]),t}(n.Component)),oe=a(102),ue=a(103),he=a(104),de=a(105),me=a(110),ve={ALL:0,OTHER:2,FOOD:4,CAREER:8,FUNDRAISING:16,APPLICATION:32,PERFORMANCE:64,BOBA:128,TALKS:256,EECS:512},ge=[{type:ve.ALL,name:"All Events",color:null},{type:ve.OTHER,name:"Nontyped",color:null},{type:ve.FOOD,name:"Food",color:"green"},{type:ve.CAREER,name:"Career",color:"orange"},{type:ve.FUNDRAISING,name:"Fundraising",color:"lightblue"},{type:ve.APPLICATION,name:"Application Deadlines",color:"gold"},{type:ve.PERFORMANCE,name:"Performance",color:"pink"},{type:ve.BOBA,name:"Boba",color:"black"},{type:ve.TALKS,name:"Talks",color:"maroon"},{type:ve.EECS,name:"EECS-Jobs-Announce",color:"brown"}],pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={event:null},x.getEventById(e.match.params.id).then((function(e){a.setState({event:e.data})})),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getColorNames",value:function(e){return ge.map((function(t){console.log(t);var a=t.color;return null==a?null:t.type&e?r.a.createElement(oe.a,{key:t.type,className:"mx-2",style:{backgroundColor:a}},t.name):void 0}))}},{key:"render",value:function(){return null===this.state.event?r.a.createElement("div",null):r.a.createElement("div",{className:"m-4"},r.a.createElement(ue.a,null,r.a.createElement(he.a,{lg:"12",xl:"6"},r.a.createElement(de.a,{body:!0},r.a.createElement("h3",null,this.state.event.name),r.a.createElement("h5",null,new Date(this.state.event.start_time).toLocaleDateString()," @ ",new Date(this.state.event.start_time).toLocaleTimeString()),r.a.createElement("p",null," Type: ",this.getColorNames(this.state.event.type)," "),r.a.createElement(me.a,{href:"/events/"+this.props.match.params.id},"See Event"),r.a.createElement("br",null),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.event.description_html}})))))}}]),t}(n.Component),fe=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement("div",null,r.a.createElement(m.Helmet,null,r.a.createElement("meta",{charset:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=yes"}),r.a.createElement("meta",{name:"theme-color",content:"#5f63d4"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Fredoka+One|Nunito:300,400,600,700",rel:"stylesheet"}),r.a.createElement("title",null,"Dormspam")),r.a.createElement(g.a,null,r.a.createElement(ye,{exact:!0,path:"/",component:Q}),r.a.createElement(ye,{exact:!0,path:"/event/:id",component:G}),r.a.createElement(ye,{exact:!0,path:"/approve/:id",component:pe}),r.a.createElement(ye,{exact:!0,path:"/login",component:$}),r.a.createElement(ye,{exact:!0,path:"/settings",component:te,authenticated:!0}),r.a.createElement(ye,{exact:!0,path:"/admin",component:le,authenticated:!0}),r.a.createElement(ye,{exact:!0,path:"/verify",component:ae}))))}}]),t}(n.Component),ye=function(e){var t=e.component,a=Object(c.a)(e,["component"]);return!0!==a.authenticated||f()?r.a.createElement(p.a,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement($,null)},be=fe;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(be,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4c30a23d.chunk.js.map